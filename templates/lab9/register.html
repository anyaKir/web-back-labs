{% extends "base.html" %}

{% block lab %}–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ 9 - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è{% endblock %}

{% block main %}
<div class="lab9-auth-container">
    <div class="new-year-header">
        <h1>üéÑ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ –ù–æ–≤–æ–≥–æ–¥–Ω–µ–º –ü–æ—Ä—Ç–∞–ª–µ üéÅ</h1>
        <p class="subtitle">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ –≤–æ–ª—à–µ–±—Å—Ç–≤—É –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –≤—Å–µ –ø–æ–¥–∞—Ä–∫–∏!</p>
    </div>
    
    {% if error %}
    <div class="error-message">
        ‚ùå {{ error }}
    </div>
    {% endif %}
    
    <form method="POST" action="/lab9/register" class="lab9-auth-form">
        <div class="form-group">
            <label for="login">
                <span class="icon">üë§</span> –õ–æ–≥–∏–Ω:
            </label>
            <input type="text" id="login" name="login" required 
                   placeholder="–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –ª–æ–≥–∏–Ω (–º–∏–Ω–∏–º—É–º 3 —Å–∏–º–≤–æ–ª–∞)"
                   value="{{ request.form.login if request.form else '' }}"
                   class="form-input"
                   minlength="3">
            <small class="form-hint">–ë—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –≤—Ö–æ–¥–∞ –≤ —Å–∏—Å—Ç–µ–º—É</small>
        </div>
        
        <div class="form-group">
            <label for="password">
                <span class="icon">üîë</span> –ü–∞—Ä–æ–ª—å:
            </label>
            <input type="password" id="password" name="password" required 
                   placeholder="–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å (–º–∏–Ω–∏–º—É–º 4 —Å–∏–º–≤–æ–ª–∞)"
                   class="form-input"
                   minlength="4">
            <small class="form-hint">–ù–µ –º–µ–Ω–µ–µ 4 —Å–∏–º–≤–æ–ª–æ–≤</small>
        </div>
        
        <div class="form-group">
            <label for="confirm_password">
                <span class="icon">‚úÖ</span> –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å:
            </label>
            <input type="password" id="confirm_password" name="confirm_password" required 
                   placeholder="–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å"
                   class="form-input">
            <small class="form-hint">–ü–∞—Ä–æ–ª–∏ –¥–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å</small>
        </div>
        
        <div class="form-actions">
            <button type="submit" class="submit-btn">
                <span class="btn-icon">üéÖ</span> –°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç
            </button>
        </div>
        
        <div class="password-strength" id="password-strength">
            <div class="strength-bar">
                <div class="strength-fill" id="strength-fill"></div>
            </div>
            <div class="strength-text" id="strength-text">–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å –ø–∞—Ä–æ–ª—è</div>
        </div>
    </form>
    
    <div class="auth-links">
        <div class="link-item">
            <span class="icon">üîì</span>
            <a href="/lab9/login">–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? –í–æ–π–¥–∏—Ç–µ!</a>
        </div>
        <div class="link-item">
            <span class="icon">‚Üê</span>
            <a href="/lab9/">–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –ø–æ–¥–∞—Ä–∫–∞–º</a>
        </div>
        <div class="link-item">
            <span class="icon">üè†</span>
            <a href="/">–ù–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É</a>
        </div>
    </div>
    
    <div class="new-year-benefits">
        <h3>‚ú® –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:</h3>
        <div class="benefits-grid">
            <div class="benefit-card">
                <div class="benefit-icon">üéÅ</div>
                <h4>–í—Å–µ –ø–æ–¥–∞—Ä–∫–∏ –æ—Ç–∫—Ä—ã—Ç—ã</h4>
                <p>–û—Ç–∫—Ä—ã–≤–∞–π—Ç–µ –≤—Å–µ 10 –ø–æ–¥–∞—Ä–∫–æ–≤, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ 3!</p>
            </div>
            <div class="benefit-card">
                <div class="benefit-icon">üéÖ</div>
                <h4>–î–µ–¥ –ú–æ—Ä–æ–∑ —Å –≤–∞–º–∏</h4>
                <p>–ú–æ–∂–µ—Ç–µ –≤—ã–∑—ã–≤–∞—Ç—å –î–µ–¥–∞ –ú–æ—Ä–æ–∑–∞ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –Ω–∞–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ—Ä–æ–±–æ–∫</p>
            </div>
            <div class="benefit-card">
                <div class="benefit-icon">‚≠ê</div>
                <h4>–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞</h4>
                <p>–í–∞—à–∏ –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–¥–∞—Ä–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏</p>
            </div>
            <div class="benefit-card">
                <div class="benefit-icon">üîí</div>
                <h4>–≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ –ø–æ–¥–∞—Ä–∫–∏</h4>
                <p>–î–æ—Å—Ç—É–ø –∫ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–º –ø–æ–¥–∞—Ä–∫–∞–º —Ç–æ–ª—å–∫–æ –¥–ª—è –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö</p>
            </div>
        </div>
    </div>
</div>

<style>
.lab9-auth-container {
    max-width: 600px;
    margin: 30px auto;
    padding: 30px;
    background: linear-gradient(135deg, #1a2980, #26d0ce);
    border-radius: 20px;
    color: white;
    box-shadow: 0 15px 35px rgba(0,0,0,0.3);
    position: relative;
    overflow: hidden;
}

.lab9-auth-container::before {
    content: "‚ú®";
    position: absolute;
    top: -50px;
    right: -50px;
    font-size: 200px;
    opacity: 0.1;
    transform: rotate(15deg);
}

.new-year-header {
    text-align: center;
    margin-bottom: 30px;
    position: relative;
    z-index: 1;
}

.new-year-header h1 {
    color: #ffd700;
    text-shadow: 3px 3px 6px rgba(0,0,0,0.5);
    margin-bottom: 10px;
    font-size: 28px;
}

.subtitle {
    color: #e0e0e0;
    font-size: 16px;
    margin-top: 5px;
}

.lab9-auth-form {
    background: rgba(255, 255, 255, 0.1);
    padding: 25px;
    border-radius: 15px;
    backdrop-filter: blur(10px);
    border: 2px solid rgba(255, 215, 0, 0.3);
    position: relative;
    z-index: 1;
}

.form-group {
    margin-bottom: 25px;
}

.form-group label {
    display: block;
    margin-bottom: 10px;
    font-weight: bold;
    font-size: 18px;
    color: #ffd700;
}

.form-group .icon {
    margin-right: 10px;
    font-size: 20px;
}

.form-input {
    width: 100%;
    padding: 14px 18px;
    border: 2px solid #ffd700;
    border-radius: 10px;
    background: rgba(255, 255, 255, 0.95);
    font-size: 16px;
    box-sizing: border-box;
    transition: all 0.3s ease;
    color: #333;
}

.form-input:focus {
    outline: none;
    box-shadow: 0 0 0 3px rgba(255, 215, 0, 0.3);
    transform: translateY(-2px);
}

.form-input::placeholder {
    color: #999;
}

.form-hint {
    display: block;
    margin-top: 8px;
    font-size: 14px;
    color: #ddd;
    font-style: italic;
}

.form-actions {
    margin-top: 30px;
}

.submit-btn {
    width: 100%;
    padding: 16px;
    background: linear-gradient(45deg, #27ae60, #2ecc71);
    color: white;
    border: none;
    border-radius: 10px;
    font-size: 20px;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
}

.submit-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 10px 20px rgba(39, 174, 96, 0.4);
}

.submit-btn:active {
    transform: translateY(-1px);
}

.btn-icon {
    font-size: 24px;
}

.error-message {
    background: rgba(231, 76, 60, 0.2);
    border: 2px solid #e74c3c;
    border-radius: 10px;
    padding: 15px;
    margin-bottom: 25px;
    text-align: center;
    font-weight: bold;
    color: #ffcccc;
    position: relative;
    z-index: 1;
}

.auth-links {
    margin-top: 30px;
    position: relative;
    z-index: 1;
}

.link-item {
    margin: 15px 0;
    padding: 12px 20px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 8px;
    transition: all 0.3s ease;
}

.link-item:hover {
    background: rgba(255, 255, 255, 0.2);
    transform: translateX(5px);
}

.link-item a {
    color: #ffd700;
    text-decoration: none;
    font-weight: bold;
    display: flex;
    align-items: center;
    gap: 10px;
}

.link-item .icon {
    font-size: 20px;
}

/* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –ø–∞—Ä–æ–ª—è */
.password-strength {
    margin-top: 25px;
    padding: 15px;
    background: rgba(0, 0, 0, 0.2);
    border-radius: 8px;
}

.strength-bar {
    height: 8px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 4px;
    overflow: hidden;
    margin-bottom: 8px;
}

.strength-fill {
    height: 100%;
    width: 0%;
    background: #e74c3c;
    border-radius: 4px;
    transition: all 0.3s ease;
}

.strength-text {
    font-size: 14px;
    color: #ddd;
    text-align: center;
}

/* –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ */
.new-year-benefits {
    margin-top: 40px;
    position: relative;
    z-index: 1;
}

.new-year-benefits h3 {
    color: #ffd700;
    text-align: center;
    margin-bottom: 25px;
    font-size: 24px;
}

.benefits-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
}

.benefit-card {
    background: rgba(255, 255, 255, 0.1);
    padding: 20px;
    border-radius: 12px;
    text-align: center;
    transition: all 0.3s ease;
    border: 1px solid rgba(255, 215, 0, 0.2);
}

.benefit-card:hover {
    transform: translateY(-5px);
    background: rgba(255, 255, 255, 0.15);
    box-shadow: 0 10px 20px rgba(0,0,0,0.2);
}

.benefit-icon {
    font-size: 40px;
    margin-bottom: 15px;
}

.benefit-card h4 {
    color: #ffd700;
    margin-bottom: 10px;
    font-size: 18px;
}

.benefit-card p {
    color: #e0e0e0;
    font-size: 14px;
    line-height: 1.5;
}

/* –°–Ω–µ–∂–∏–Ω–∫–∏ */
@keyframes snow {
    0% { transform: translateY(-100px) rotate(0deg); }
    100% { transform: translateY(100vh) rotate(360deg); }
}

.snowflake {
    position: absolute;
    color: white;
    opacity: 0.5;
    animation: snow 10s linear infinite;
    z-index: 0;
    user-select: none;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const container = document.querySelector('.lab9-auth-container');
    
    // –î–æ–±–∞–≤–ª—è–µ–º —Å–Ω–µ–∂–∏–Ω–∫–∏
    for (let i = 0; i < 25; i++) {
        const snowflake = document.createElement('div');
        snowflake.className = 'snowflake';
        snowflake.innerHTML = '‚ùÑÔ∏è';
        snowflake.style.left = Math.random() * 100 + '%';
        snowflake.style.fontSize = (Math.random() * 15 + 8) + 'px';
        snowflake.style.animationDuration = (Math.random() * 10 + 5) + 's';
        snowflake.style.animationDelay = Math.random() * 5 + 's';
        container.appendChild(snowflake);
    }
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –ø–∞—Ä–æ–ª—è
    const passwordInput = document.getElementById('password');
    const confirmInput = document.getElementById('confirm_password');
    const strengthFill = document.getElementById('strength-fill');
    const strengthText = document.getElementById('strength-text');
    
    passwordInput.addEventListener('input', function() {
        const password = this.value;
        let strength = 0;
        let text = '';
        let color = '';
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–ª–∏–Ω—É
        if (password.length >= 4) strength += 25;
        if (password.length >= 8) strength += 25;
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —Ä–∞–∑–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
        if (/[A-Z]/.test(password)) strength += 25;
        if (/[0-9]/.test(password)) strength += 25;
        
        // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–µ–∫—Å—Ç –∏ —Ü–≤–µ—Ç
        if (strength === 0) {
            text = '–û—á–µ–Ω—å —Å–ª–∞–±—ã–π';
            color = '#e74c3c';
        } else if (strength <= 25) {
            text = '–°–ª–∞–±—ã–π';
            color = '#e67e22';
        } else if (strength <= 50) {
            text = '–°—Ä–µ–¥–Ω–∏–π';
            color = '#f1c40f';
        } else if (strength <= 75) {
            text = '–•–æ—Ä–æ—à–∏–π';
            color = '#2ecc71';
        } else {
            text = '–û—Ç–ª–∏—á–Ω—ã–π';
            color = '#27ae60';
        }
        
        strengthFill.style.width = strength + '%';
        strengthFill.style.background = color;
        strengthText.textContent = text + ' –ø–∞—Ä–æ–ª—å';
        strengthText.style.color = color;
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
        if (confirmInput.value && password !== confirmInput.value) {
            confirmInput.style.borderColor = '#e74c3c';
            confirmInput.style.boxShadow = '0 0 0 2px rgba(231, 76, 60, 0.3)';
        } else if (confirmInput.value) {
            confirmInput.style.borderColor = '#27ae60';
            confirmInput.style.boxShadow = '0 0 0 2px rgba(39, 174, 96, 0.3)';
        }
    });
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –ø–∞—Ä–æ–ª–µ–π
    confirmInput.addEventListener('input', function() {
        if (passwordInput.value && passwordInput.value !== this.value) {
            this.style.borderColor = '#e74c3c';
            this.style.boxShadow = '0 0 0 2px rgba(231, 76, 60, 0.3)';
        } else if (passwordInput.value) {
            this.style.borderColor = '#27ae60';
            this.style.boxShadow = '0 0 0 2px rgba(39, 174, 96, 0.3)';
        }
    });
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º—ã –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
    const form = document.querySelector('.lab9-auth-form');
    form.addEventListener('submit', function(e) {
        const password = passwordInput.value;
        const confirmPassword = confirmInput.value;
        
        if (password !== confirmPassword) {
            e.preventDefault();
            alert('‚ùå –ü–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç! –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–≤–µ–¥–µ–Ω–Ω—ã–µ –ø–∞—Ä–æ–ª–∏.');
            confirmInput.focus();
            return false;
        }
        
        if (password.length < 4) {
            e.preventDefault();
            alert('‚ùå –ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–µ –º–µ–Ω–µ–µ 4 —Å–∏–º–≤–æ–ª–æ–≤!');
            passwordInput.focus();
            return false;
        }
        
        return true;
    });
});
</script>
{% endblock %}